openapi: 3.0.0
info:
  title: E4C EV Charging System Data Models
  version: 1.0.0
  description: |
    Complete E4C Electric Vehicle Charging System Data Models for NGSI-LD
    This specification defines all entities and their relationships for the E4C charging infrastructure

# Required paths section for OpenAPI compliance
paths:
  /entities:
    get:
      summary: Get E4C entities
      description: Retrieve E4C charging system entities
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ChargingStation'
                  - $ref: '#/components/schemas/ChargingPoint'
                  - $ref: '#/components/schemas/E-Vehicle'
                  - $ref: '#/components/schemas/ChargingSession'

components:
  schemas:
    # =====================================
    # ChargingStation - E4C Static Information
    # =====================================
    ChargingStation:
      description: E4C charging station that contains multiple charging points for electric vehicles - static configuration data
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the charging station entity
          pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
          maxLength: 256
          minLength: 1
          x-ngsi:
            type: Property
        
        type:
          type: string
          enum:
            - ChargingStation
          description: NGSI-LD Entity type. It must be ChargingStation
          x-ngsi:
            type: Property

        dateCreated:
          type: string
          format: date-time
          description: Entity creation timestamp. This will usually be allocated by the storage platform
          x-ngsi:
            type: Property
        
        lastUpdated:
          type: string
          format: date-time
          description: Timestamp when data was last updated
          x-ngsi:
            model: https://schema.org/DateTime
            type: Property
        
        stationName:
          type: string
          description: Name of the charging station
          x-ngsi:
            type: Property
            model: http://schema.org/Text
        
        stationId:
          type: string
          description: External identifier or code for the station
          x-ngsi:
            type: Property
            model: http://schema.org/Text
        
        totalChargingPoints:
          type: integer
          minimum: 1
          description: Total number of charging points installed in this station
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        maxPowerCapacity:
          type: number
          minimum: 0
          description: Maximum total power capacity of the station in kW
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: kW
        
        ratedVoltage:
          type: number
          minimum: 0
          description: The rated voltage offered by the charging station in Volts
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: V
        
        gridConnection:
          type: string
          enum:
            - lowVoltage
            - mediumVoltage
            - highVoltage
            - directCurrent
          description: Type of electrical grid connection
          x-ngsi:
            type: Property
            model: http://schema.org/Text
        
        socketType:
          type: array
          items:
            type: string
            enum:
              - Type1_J1772
              - Type2_Mennekes
              - CHAdeMO
              - CCS_Combo1
              - CCS_Combo2
              - Tesla_Supercharger
              - Tesla_Destination
              - GB_T_AC
              - GB_T_DC
              - Schuko
              - CEE
              - Caravan_Mains_Socket
              - Wall_Euro
              - Other
          minItems: 1
          uniqueItems: true
          description: Types of charging sockets/connectors available at this station
          x-ngsi:
            type: Property
            model: http://schema.org/Text
        
        # Relationships
        refChargingPoints:
          type: array
          items:
            type: string
            format: uri
          description: References to charging points in this station
          x-ngsi:
            type: Relationship
            model: http://schema.org/URL
        
        refStationStatus:
          type: string
          format: uri
          description: Reference to real-time station status information
          x-ngsi:
            type: Relationship
            model: http://schema.org/URL
      
      required:
        - id
        - type
        - stationName
        - totalChargingPoints
        - socketType

    # =====================================
    # ChargingStationStatus - E4C Dynamic Information
    # =====================================
    ChargingStationStatus:
      description: Real-time operational status and dynamic data for E4C charging station
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the charging station status entity
          pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
          maxLength: 256
          minLength: 1
          x-ngsi:
            type: Property
        
        type:
          type: string
          enum:
            - ChargingStationStatus
          description: NGSI-LD Entity type. It must be ChargingStationStatus
          x-ngsi:
            type: Property
        
        dateCreated:
          type: string
          format: date-time
          description: Entity creation timestamp
          x-ngsi:
            type: Property
        
        refChargingStation:
          type: string
          format: uri
          description: Reference to the charging station this status belongs to
          x-ngsi:
            type: Relationship
            model: http://schema.org/URL
        
        operationalStatus:
          type: string
          enum:
            - operational
            - outOfService
            - maintenance
          description: Overall operational status of the charging station
          x-ngsi:
            type: Property
            model: http://schema.org/Text
        
        totalPoints:
          type: integer
          minimum: 0
          description: Total number of charging points in the station
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        availablePoints:
          type: integer
          minimum: 0
          description: Number of currently available charging points
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        occupiedPoints:
          type: integer
          minimum: 0
          description: Number of occupied charging points
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        faultedPoints:
          type: integer
          minimum: 0
          description: Number of faulted charging points
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        maintenancePoints:
          type: integer
          minimum: 0
          description: Number of points under maintenance
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        reservedPoints:
          type: integer
          minimum: 0
          description: Number of reserved charging points
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        currentPowerConsumption:
          type: number
          minimum: 0
          description: Current total power consumption of all active units in kW
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: kW
        
        currentGridPowerConsumption:
          type: number
          minimum: 0
          description: Current power consumption from electrical grid in kW
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: kW
        
        currentRenewablePowerConsumption:
          type: number
          minimum: 0
          description: Current power consumption from renewable energy sources in kW
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: kW
        
        activeSessionsCount:
          type: integer
          minimum: 0
          description: Number of currently active charging sessions
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        queueLength:
          type: integer
          minimum: 0
          description: Number of vehicles waiting in queue
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        estimatedWaitTime:
          type: integer
          minimum: 0
          description: Estimated wait time for next available unit in minutes
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: minutes
        
        ambientTemperature:
          type: number
          description: Current ambient temperature in Celsius
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: Celsius
        
        humidity:
          type: number
          minimum: 0
          maximum: 100
          description: Current relative humidity in percentage
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: percent
        
        weatherConditions:
          type: string
          enum:
            - clear
            - cloudy
            - rainy
            - snowy
            - stormy
            - windy
            - foggy
          description: Current weather conditions
          x-ngsi:
            type: Property
            model: http://schema.org/Text
        
        gridVoltage:
          type: number
          minimum: 0
          description: Current grid voltage in Volts
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: V
        
        gridFrequency:
          type: number
          minimum: 0
          description: Current grid frequency in Hz
          x-ngsi:
            type: Property
            model: http://schema.org/Number
            units: Hz
        
        powerFactor:
          type: number
          minimum: 0
          maximum: 1
          description: Current power factor
          x-ngsi:
            type: Property
            model: http://schema.org/Number
        
        lastMaintenanceDate:
          type: string
          format: date-time
          description: Timestamp of last maintenance performed
          x-ngsi:
            type: Property
        
        nextScheduledMaintenance:
          type: string
          format: date-time
          description: Next scheduled maintenance timestamp
          x-ngsi:
            type: Property
      
      required:
        - id
        - type
        - refChargingStation
        - dateCreated
        - totalPoints
        - availablePoints

    # =====================================
    # ChargingPoint - E4C Static Information
    # =====================================
    ChargingPoint:
      description: An E4C charging point within a charging station, containing static configuration and specification data
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the charging point entity
          pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
          maxLength: 256
          minLength: 1
          x-ngsi:
            type: Property
        
        type:
          type: string
          enum:
            - ChargingPoint
          description: NGSI Entity type. It has to be ChargingPoint
          x-ngsi:
            type: Property
        
        dateCreated:
          type: string
          format: date-time
          description: Entity creation timestamp
          x-ngsi:
            type: Property
        
        lastUpdated:
          type: string
          format: date-time
          description: Timestamp when data was last updated
          x-ngsi:
            model: https://schema.org/DateTime
            type: Property
        
        refChargingStation:
          type: string
          format: uri
          description: Reference to the charging station this point belongs to
          x-ngsi:
            model: https://schema.org/URL
            type: Relationship
        
        pointId:
          type: string
          description: External point identifier from charging management system
          x-ngsi:
            model: https://schema.org/Text
            type: Property
        
        chargingType:
          type: string
          enum:
            - AC-Level1
            - AC-Level2
            - DC-FastCharging
            - bidirectional
          description: Type of charging supported by this point
          x-ngsi:
            model: https://schema.org/Text
            type: Property
        
        connectorTypes:
          type: array
          items:
            type: string
            enum:
              - CCS1
              - CCS2
              - CHAdeMO
              - Type1
              - Type2
              - Tesla
              - GBT
              - NACS
              - Schuko
              - CEE
          description: Types of connectors available on this point
          x-ngsi:
            model: https://schema.org/Text
            type: Property
        
        numberOfConnectors:
          type: integer
          minimum: 1
          description: Number of connectors on this point
          x-ngsi:
            model: https://schema.org/Number
            type: Property
        
        powerCapabilities:
          type: object
          description: Detailed power capabilities of the point
          properties:
            maxACPower:
              type: number
              minimum: 0
              description: Maximum AC power output in kW
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kW
            maxDCPower:
              type: number
              minimum: 0
              description: Maximum DC power output in kW
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kW
            maxVoltage:
              type: number
              minimum: 0
              description: Maximum output voltage in V
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: V
            maxCurrent:
              type: number
              minimum: 0
              description: Maximum output current in A
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: A
            phases:
              type: integer
              enum: [1, 3]
              description: Number of electrical phases (1 or 3)
              x-ngsi:
                model: https://schema.org/Number
                type: Property
          x-ngsi:
            model: https://schema.org/Object
            type: Property
        
        communicationProtocol:
          type: string
          enum:
            - OCPP1.6
            - OCPP2.0
            - OCPP2.0.1
            - ISO15118
            - proprietary
            - other
          description: Communication protocol used by the point
          x-ngsi:
            model: https://schema.org/Text
            type: Property
        
        refSession:
          type: string
          format: uri
          description: Reference to current charging session if point is in use
          x-ngsi:
            model: https://schema.org/URL
            type: Relationship

        refChargingPointStatus:
          type: string
          format: uri
          description: Reference to the PointStatus
          x-ngsi:
            model: https://schema.org/URL
            type: Relationship
      
      required:
        - id
        - type
        - refChargingStation
        - chargingType
        - connectorTypes

    # =====================================
    # ChargingPointStatus - E4C Dynamic Information
    # =====================================
    ChargingPointStatus:
      description: Real-time operational status and dynamic data for E4C charging point
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the charging point status entity
          pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
          maxLength: 256
          minLength: 1
          x-ngsi:
            type: Property
        
        type:
          type: string
          enum:
            - ChargingPointStatus
          description: NGSI Entity type. It has to be ChargingPointStatus
          x-ngsi:
            type: Property
        
        dateCreated:
          type: string
          format: date-time
          description: Entity creation timestamp
          x-ngsi:
            type: Property
        
        refChargingPoint:
          type: string
          format: uri
          description: Reference to the charging point this status belongs to
          x-ngsi:
            model: https://schema.org/URL
            type: Relationship
        
        unitStatus:
          type: string
          enum:
            - available
            - occupied
            - reserved
            - charging
            - finishing
          description: Current operational status of the charging point
          x-ngsi:
            model: https://schema.org/Text
            type: Property
        
        operatingData:
          type: object
          description: Current operating parameters of the point
          properties:
            currentPowerOutput:
              type: number
              minimum: 0
              description: Current power output in kW
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kW
            currentVoltage:
              type: number
              minimum: 0
              description: Current output voltage in V
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: V
            currentCurrent:
              type: number
              minimum: 0
              description: Current output current in A
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: A
            powerFactor:
              type: number
              minimum: 0
              maximum: 1
              description: Current power factor
              x-ngsi:
                model: https://schema.org/Number
                type: Property
            efficiency:
              type: number
              minimum: 0
              maximum: 100
              description: Current operating efficiency percentage
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: percent
          x-ngsi:
            model: https://schema.org/Object
            type: Property
      
      required:
        - id
        - type
        - refChargingPoint
        - unitStatus
        - dateCreated

    # =====================================
    # E-Vehicle - E4C Static Information
    # =====================================
    E-Vehicle:
      description: Static information and specifications for a E4C electric vehicle
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the electric vehicle entity
          pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
          maxLength: 256
          minLength: 1
          x-ngsi:
            type: Property
        
        type:
          type: string
          enum:
            - E-Vehicle
          description: NGSI Entity type. It has to be E-Vehicle
          x-ngsi:
            type: Property
        
        dateCreated:
          type: string
          format: date-time
          description: Entity creation timestamp
          x-ngsi:
            type: Property
        
        lastUpdated:
          type: string
          format: date-time
          description: Timestamp when data was last updated
          x-ngsi:
            model: https://schema.org/DateTime
            type: Property
        
        vehiclePlateIdentifier:
          type: string
          description: An identifier or code displayed on a vehicle registration plate
          x-ngsi:
            model: https://schema.org/Text
            type: Property
        
        brand:
          type: string
          description: Vehicle brand or manufacturer
          x-ngsi:
            model: https://schema.org/brand
            type: Property
        
        color:
          type: string
          description: The color of the vehicle
          x-ngsi:
            model: https://schema.org/color
            type: Property
        
        vehicleType:
          type: string
          enum:
            - car
            - van
            - motorcycle
          description: Type of vehicle from structural characteristics
          x-ngsi:
            model: https://schema.org/Text
            type: Property
        
        batterySpecifications:
          type: object
          description: Battery system specifications
          properties:
            totalCapacity:
              type: number
              minimum: 0
              description: Total battery capacity in kWh
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kWh
            batteryType:
              type: string
              enum:
                - lithium-ion
                - lithium-polymer
                - nickel-metal-hydride
                - solid-state
                - other
              description: Type of battery technology
              x-ngsi:
                model: https://schema.org/Text
                type: Property
            nominalVoltage:
              type: number
              minimum: 0
              description: Nominal battery voltage in Volts
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: V
          x-ngsi:
            model: https://schema.org/Object
            type: Property

        chargingCapabilities:
          type: object
          description: Charging system capabilities and specifications
          properties:
            maxChargingPowerAC:
              type: number
              minimum: 0
              description: Maximum AC charging power supported by the vehicle in kW
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kW
            maxChargingPowerDC:
              type: number
              minimum: 0
              description: Maximum DC charging power supported by the vehicle in kW
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kW
            chargingPortTypes:
              type: array
              items:
                type: string
                enum:
                  - CCS1
                  - CCS2
                  - CHAdeMO
                  - Type1
                  - Type2
                  - Tesla
                  - GBT
                  - NACS
              description: Types of charging ports available on the vehicle
              x-ngsi:
                model: https://schema.org/Text
                type: Property
            chargingStandards:
              type: array
              items:
                type: string
                enum:
                  - AC-Level1
                  - AC-Level2
                  - DC-FastCharging
                  - bidirectional
              description: Charging standards supported by the vehicle
              x-ngsi:
                model: https://schema.org/Text
                type: Property
          x-ngsi:
            model: https://schema.org/Object
            type: Property
        
        refVehicleStatus:
          type: string
          format: uri
          description: Reference to current Vehicle Status
          x-ngsi:
            model: https://schema.org/URL
            type: Relationship
      
      required:
        - id
        - type
        - brand
        - vehiclePlateIdentifier
        - batterySpecifications
        - chargingCapabilities
        - refVehicleStatus
        - vehicleType

    # =====================================
    # E-VehicleStatus - E4C Dynamic Information
    # =====================================
    E-VehicleStatus:
      description: Real-time operational status and dynamic data for E4C electric vehicle
      type: object
      properties:
        id:
          type: string
          description: Unique identifier of the electric vehicle status entity
          pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
          maxLength: 256
          minLength: 1
          x-ngsi:
            type: Property
        
        type:
          type: string
          enum:
            - E-VehicleStatus
          description: NGSI Entity type. It has to be E-VehicleStatus
          x-ngsi:
            type: Property
        
        dateCreated:
          type: string
          format: date-time
          description: Entity creation timestamp
          x-ngsi:
            type: Property
        
        refVehicle:
          type: string
          format: uri
          description: Reference to the E-Vehicle this status belongs to
          x-ngsi:
            model: https://schema.org/URL
            type: Relationship
        
        batteryStatus:
          type: object
          description: Current battery status and health information
          properties:
            stateOfCharge:
              type: number
              minimum: 0
              maximum: 100
              description: Current battery state of charge as percentage (0-100)
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: percent
            batteryVoltage:
              type: number
              minimum: 0
              description: Current battery pack voltage in Volts
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: V
            batteryCurrent:
              type: number
              description: Current battery pack current in Amperes (positive for discharge, negative for charge)
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: A
            batteryPower:
              type: number
              description: Current battery power in kW (positive for discharge, negative for charge)
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kW
            stateOfHealth:
              type: number
              minimum: 0
              maximum: 100
              description: Battery state of health as percentage (0-100)
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: percent
            cycleCount:
              type: integer
              minimum: 0
              description: Number of charge/discharge cycles completed
              x-ngsi:
                model: https://schema.org/Number
                type: Property
            timeToEmpty:
              type: number
              minimum: 0
              description: Estimated time until battery is empty in minutes
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: minutes
            timeToFull:
              type: number
              minimum: 0
              description: Estimated time until battery is fully charged in minutes
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: minutes
          x-ngsi:
            model: https://schema.org/Object
            type: Property
        
        batteryRangeStatus:
          type: object
          description: Real-time status about driving range
          properties:
            currentRange:
              type: number
              minimum: 0
              description: Current estimated driving range with present battery level in kilometers
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: km
            rangeAtFullCharge:
              type: number
              minimum: 0
              description: Maximum driving range when battery reaches 100% SoC in kilometers
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: km
            energyConsumptionRate:
              type: number
              minimum: 0
              description: Real-time energy consumption rate in kWh per 100km
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kWh/100km
        
        chargingStatus:
          type: object
          description: Current charging status and information
          properties:
            isCharging:
              type: boolean
              description: Whether the vehicle is currently charging
              x-ngsi:
                model: https://schema.org/Boolean
                type: Property
            chargingState:
              type: string
              enum:
                - initiated
                - authorized
                - started
                - charging
                - suspended
                - ended
                - completed
                - failed
                - cancelled
              description: Current charging state
              x-ngsi:
                model: https://schema.org/Text
                type: Property
            chargingMode:
              type: string
              enum:
                - AC-Level1
                - AC-Level2
                - DC-FastCharging
                - bidirectional
              description: Current charging mode
              x-ngsi:
                model: https://schema.org/Text
                type: Property
            chargingPower:
              type: number
              minimum: 0
              description: Current charging power in kW
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kW
            chargingVoltage:
              type: number
              minimum: 0
              description: Current charging voltage in Volts
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: V
            chargingCurrent:
              type: number
              minimum: 0
              description: Current charging current in Amperes
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: A
            chargingEfficiency:
              type: number
              minimum: 0
              maximum: 100
              description: Current charging efficiency as percentage
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: percent
            energyConsumed:
              type: number
              minimum: 0
              description: Total energy consumed during current charging session in kWh
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: kWh
            chargingStartTime:
              type: string
              format: date-time
              description: Timestamp when current charging session started
              x-ngsi:
                model: https://schema.org/DateTime
                type: Property
            estimatedChargingTime:
              type: number
              minimum: 0
              description: Estimated remaining charging time in minutes
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: minutes
            targetStateOfCharge:
              type: number
              minimum: 0
              maximum: 100
              description: Target state of charge for current charging session
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                units: percent
          x-ngsi:
            model: https://schema.org/Object
            type: Property
        
        refChargingSession:
          type: string
          format: uri
          description: Reference to current charging session if vehicle is currently charging
          x-ngsi:
            model: https://schema.org/URL
            type: Relationship
      
      required:
        - id
        - type
        - refVehicle
        - batteryStatus
        - dateCreated